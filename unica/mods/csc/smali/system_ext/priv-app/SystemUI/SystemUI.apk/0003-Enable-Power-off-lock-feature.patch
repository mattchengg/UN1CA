From 302deef4874e65e6068bfb06da7cb8d04864feb0 Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Fri, 24 Oct 2025 11:26:34 +0200
Subject: [PATCH] Enable Power off lock feature

---
 .../bixby2/controller/DeviceController.smali  | 22 -------------------
 .../features/GlobalActionFeatures.smali       |  6 +----
 2 files changed, 1 insertion(+), 27 deletions(-)

diff --git a/smali/com/android/systemui/bixby2/controller/DeviceController.smali b/smali/com/android/systemui/bixby2/controller/DeviceController.smali
index 97cf0cdc9..27b6b8cfd 100644
--- a/smali/com/android/systemui/bixby2/controller/DeviceController.smali
+++ b/smali/com/android/systemui/bixby2/controller/DeviceController.smali
@@ -136,22 +136,6 @@
     return p0
 .end method
 
-.method private isSupportPowerOffLock()Z
-    .locals 1
-
-    invoke-static {}, Lcom/samsung/android/feature/SemCscFeature;->getInstance()Lcom/samsung/android/feature/SemCscFeature;
-
-    move-result-object p0
-
-    const-string v0, "CscFeature_SystemUI_SupportPowerOffLock"
-
-    invoke-virtual {p0, v0}, Lcom/samsung/android/feature/SemCscFeature;->getBoolean(Ljava/lang/String;)Z
-
-    move-result p0
-
-    return p0
-.end method
-
 .method private setOrientationMode(Landroid/content/Context;I)Lcom/android/systemui/bixby2/CommandActionResponse;
     .locals 4
 
@@ -820,12 +804,6 @@
 
     invoke-static {v1, p1}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
 
-    invoke-direct {p0}, Lcom/android/systemui/bixby2/controller/DeviceController;->isSupportPowerOffLock()Z
-
-    move-result p1
-
-    if-eqz p1, :cond_5
-
     invoke-direct {p0, v0}, Lcom/android/systemui/bixby2/controller/DeviceController;->isNeedSecureConfirm(Landroid/content/ContentResolver;)Z
 
     move-result p1
diff --git a/smali_classes2/com/android/systemui/globalactions/presentation/features/GlobalActionFeatures.smali b/smali_classes2/com/android/systemui/globalactions/presentation/features/GlobalActionFeatures.smali
index 66e7610a0..307202f39 100644
--- a/smali_classes2/com/android/systemui/globalactions/presentation/features/GlobalActionFeatures.smali
+++ b/smali_classes2/com/android/systemui/globalactions/presentation/features/GlobalActionFeatures.smali
@@ -338,11 +338,7 @@
 
     if-eqz v0, :cond_d
 
-    iget-object v0, p0, Lcom/android/systemui/globalactions/presentation/features/GlobalActionFeatures;->mSystemPropertiesWrapper:Lcom/samsung/android/globalactions/util/SystemPropertiesWrapper;
-
-    invoke-virtual {v0}, Lcom/samsung/android/globalactions/util/SystemPropertiesWrapper;->isBrazilianCountryISO()Z
-
-    move-result v0
+    move v0, v2
 
     goto :goto_2
 
-- 
2.51.1

