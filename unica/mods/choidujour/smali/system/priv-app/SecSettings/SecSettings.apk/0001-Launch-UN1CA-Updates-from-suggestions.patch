From 0bb77a4b171d668af1b0b8f069a20883ef852e9d Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Fri, 14 Nov 2025 01:10:03 +0100
Subject: [PATCH] Launch UN1CA Updates from suggestions

---
 .../Settings$FOTASuggestionActivity.smali     | 31 +++++++++++++------
 1 file changed, 21 insertions(+), 10 deletions(-)

diff --git a/smali_classes2/com/android/settings/Settings$FOTASuggestionActivity.smali b/smali_classes2/com/android/settings/Settings$FOTASuggestionActivity.smali
index 1d2c2da8e..6f1e8f374 100644
--- a/smali_classes2/com/android/settings/Settings$FOTASuggestionActivity.smali
+++ b/smali_classes2/com/android/settings/Settings$FOTASuggestionActivity.smali
@@ -19,26 +19,37 @@
 
     invoke-super {p0, p1}, Landroid/app/Activity;->onCreate(Landroid/os/Bundle;)V
 
-    new-instance p1, Landroid/content/Intent;
+    const-string v0, "io.mesalabs.choidujour"
 
-    const-string v0, "sec.fota.action.SOFTWARE_UPDATE"
+    invoke-static {p0, v0}, Lcom/samsung/android/settings/PkgUtils;->isPackageEnabled(Landroid/content/Context;Ljava/lang/String;)Z
 
-    invoke-direct {p1, v0}, Landroid/content/Intent;-><init>(Ljava/lang/String;)V
+    move-result v0
 
-    const v0, 0x10000020
+    if-eqz v0, :cond_0
 
-    invoke-virtual {p1, v0}, Landroid/content/Intent;->setFlags(I)Landroid/content/Intent;
+    new-instance v0, Landroid/content/Intent;
 
-    move-result-object p1
+    invoke-direct {v0}, Landroid/content/Intent;-><init>()V
 
-    const-string v0, "com.wssyncmldm"
+    new-instance v1, Landroid/content/ComponentName;
 
-    invoke-virtual {p1, v0}, Landroid/content/Intent;->setPackage(Ljava/lang/String;)Landroid/content/Intent;
+    const-string v2, "io.mesalabs.choidujour"
 
-    move-result-object p1
+    const-string v3, "io.mesalabs.choidujour.activity.HomeActivity"
 
-    invoke-virtual {p0, p1}, Landroid/content/Context;->sendBroadcast(Landroid/content/Intent;)V
+    invoke-direct {v1, v2, v3}, Landroid/content/ComponentName;-><init>(Ljava/lang/String;Ljava/lang/String;)V
 
+    invoke-virtual {v0, v1}, Landroid/content/Intent;->setComponent(Landroid/content/ComponentName;)Landroid/content/Intent;
+
+    const-string v1, "from_settings"
+
+    const/4 v2, 0x1
+
+    invoke-virtual {v0, v1, v2}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Z)Landroid/content/Intent;
+
+    invoke-virtual {p0, v0}, Landroid/content/Context;->startActivity(Landroid/content/Intent;)V
+
+    :cond_0
     invoke-virtual {p0}, Landroid/app/Activity;->finish()V
 
     return-void
-- 
2.51.2

