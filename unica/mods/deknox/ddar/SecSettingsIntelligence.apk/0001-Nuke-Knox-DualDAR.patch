From f1315b6c14d70e018d5979266a2ccfd19f1ae090 Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Wed, 29 Oct 2025 23:21:37 +0100
Subject: [PATCH] Nuke Knox DualDAR

---
 .../knox/container/KnoxContainerManager.smali | 44 ++-----------------
 .../android/knox/ddar/DualDARPolicy.smali     |  4 +-
 2 files changed, 5 insertions(+), 43 deletions(-)

diff --git a/smali_classes2/com/samsung/android/knox/container/KnoxContainerManager.smali b/smali_classes2/com/samsung/android/knox/container/KnoxContainerManager.smali
index 6661f08..86ea655 100644
--- a/smali_classes2/com/samsung/android/knox/container/KnoxContainerManager.smali
+++ b/smali_classes2/com/samsung/android/knox/container/KnoxContainerManager.smali
@@ -3822,49 +3822,11 @@
 .end method
 
 .method public getDualDARPolicy()Lcom/samsung/android/knox/ddar/DualDARPolicy;
-    .locals 2
-
-    iget-object v0, p0, Lcom/samsung/android/knox/container/KnoxContainerManager;->mDualDARPolicy:Lcom/samsung/android/knox/ddar/DualDARPolicy;
-
-    if-nez v0, :cond_1
-
-    monitor-enter p0
-
-    :try_start_0
-    iget-object v0, p0, Lcom/samsung/android/knox/container/KnoxContainerManager;->mDualDARPolicy:Lcom/samsung/android/knox/ddar/DualDARPolicy;
-
-    if-nez v0, :cond_0
-
-    new-instance v0, Lcom/samsung/android/knox/ddar/DualDARPolicy;
-
-    iget-object v1, p0, Lcom/samsung/android/knox/container/KnoxContainerManager;->mContextInfo:Lcom/samsung/android/knox/ContextInfo;
-
-    invoke-direct {v0, v1}, Lcom/samsung/android/knox/ddar/DualDARPolicy;-><init>(Lcom/samsung/android/knox/ContextInfo;)V
-
-    iput-object v0, p0, Lcom/samsung/android/knox/container/KnoxContainerManager;->mDualDARPolicy:Lcom/samsung/android/knox/ddar/DualDARPolicy;
-
-    goto :goto_0
-
-    :catchall_0
-    move-exception v0
-
-    goto :goto_1
-
-    :cond_0
-    :goto_0
-    monitor-exit p0
-
-    return-object v0
-
-    :goto_1
-    monitor-exit p0
-    :try_end_0
-    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+    .locals 0
 
-    throw v0
+    iget-object p0, p0, Lcom/samsung/android/knox/container/KnoxContainerManager;->mDualDARPolicy:Lcom/samsung/android/knox/ddar/DualDARPolicy;
 
-    :cond_1
-    return-object v0
+    return-object p0
 .end method
 
 .method public getEmailAccountPolicy()Lcom/samsung/android/knox/accounts/EmailAccountPolicy;
diff --git a/smali_classes2/com/samsung/android/knox/ddar/DualDARPolicy.smali b/smali_classes2/com/samsung/android/knox/ddar/DualDARPolicy.smali
index 55b460a..acfc003 100644
--- a/smali_classes2/com/samsung/android/knox/ddar/DualDARPolicy.smali
+++ b/smali_classes2/com/samsung/android/knox/ddar/DualDARPolicy.smali
@@ -96,7 +96,7 @@
 .method public static getDualDARVersion()Ljava/lang/String;
     .locals 1
 
-    const-string v0, "1.8.0"
+    const/4 v0, 0x0
 
     return-object v0
 .end method
@@ -129,7 +129,7 @@
 .method public static isDualDarSupportedForManagedDevice()Z
     .locals 1
 
-    const/4 v0, 0x1
+    const/4 v0, 0x0
 
     return v0
 .end method
-- 
2.51.1

