From 5190f7e8b485764a26118956ea30174eb1a33e25 Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Mon, 10 Nov 2025 15:11:33 +0100
Subject: [PATCH] Disable eSE support

---
 .../android/se/internal/UtilExtension.smali   | 39 +++++++------------
 1 file changed, 15 insertions(+), 24 deletions(-)

diff --git a/smali/com/android/se/internal/UtilExtension.smali b/smali/com/android/se/internal/UtilExtension.smali
index 8b4a4c9..ebcd36e 100644
--- a/smali/com/android/se/internal/UtilExtension.smali
+++ b/smali/com/android/se/internal/UtilExtension.smali
@@ -31,15 +31,7 @@
 
     sput-object v1, Lcom/android/se/internal/UtilExtension;->DUMP_ID:[B
 
-    const-string v1, "JCOP6.2U"
-
-    invoke-virtual {v1}, Ljava/lang/String;->isBlank()Z
-
-    move-result v1
-
-    xor-int/lit8 v1, v1, 0x1
-
-    sput-boolean v1, Lcom/android/se/internal/UtilExtension;->mSupportEseHal:Z
+    sput-boolean v0, Lcom/android/se/internal/UtilExtension;->mSupportEseHal:Z
 
     sput-boolean v0, Lcom/android/se/internal/UtilExtension;->mEsimEnabled:Z
 
@@ -830,11 +822,11 @@
 
     invoke-static {v0, v3}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
 
-    const-string v3, "eSE_COS: JCOP6.2U"
+    const-string v3, "eSE_COS: "
 
     invoke-static {v0, v3}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
 
-    const-string v3, "eSE_Vendor: NXP"
+    const-string v3, "eSE_Vendor: "
 
     invoke-static {v0, v3}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
 
@@ -854,14 +846,13 @@
 
     move-result v2
 
-    if-eqz v2, :cond_2
+    if-eqz v2, :cond_1
 
-    :cond_1
     move v2, v4
 
     goto :goto_0
 
-    :cond_2
+    :cond_1
     move v2, v1
 
     :goto_0
@@ -893,7 +884,7 @@
 
     move-result v5
 
-    if-nez v5, :cond_4
+    if-nez v5, :cond_3
 
     const-string v5, "JP"
 
@@ -901,16 +892,16 @@
 
     move-result v5
 
-    if-eqz v5, :cond_3
+    if-eqz v5, :cond_2
 
     goto :goto_1
 
-    :cond_3
+    :cond_2
     move v5, v1
 
     goto :goto_2
 
-    :cond_4
+    :cond_3
     :goto_1
     move v5, v4
 
@@ -947,16 +938,16 @@
 
     invoke-static {v0, v3}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I
 
-    if-nez p0, :cond_5
+    if-nez p0, :cond_4
 
-    if-eqz v2, :cond_6
+    if-eqz v2, :cond_5
 
-    if-nez v5, :cond_6
+    if-nez v5, :cond_5
 
-    :cond_5
+    :cond_4
     move v1, v4
 
-    :cond_6
+    :cond_5
     new-instance p0, Ljava/lang/StringBuilder;
 
     invoke-direct {p0}, Ljava/lang/StringBuilder;-><init>()V
@@ -999,7 +990,7 @@
 
     invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
 
-    const-string v1, "JCOP6.2U"
+    const-string v1, ""
 
     invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
 
-- 
2.51.2

