From 4af35f5da17740f2513e3d3d46fec0810ef5bba6 Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Thu, 30 Oct 2025 13:28:03 +0100
Subject: [PATCH] Disable RIL_SUPPORT_WATERPROOF_SIM_TRAY_MSG

---
 .../telephony/uicc/UiccController.smali       | 24 +++++++++----------
 1 file changed, 12 insertions(+), 12 deletions(-)

diff --git a/smali/com/android/internal/telephony/uicc/UiccController.smali b/smali/com/android/internal/telephony/uicc/UiccController.smali
index 4d2a7d0..519d710 100644
--- a/smali/com/android/internal/telephony/uicc/UiccController.smali
+++ b/smali/com/android/internal/telephony/uicc/UiccController.smali
@@ -5420,7 +5420,7 @@
 
     const-string v2, "waterproof"
 
-    const/4 v3, 0x1
+    const/4 v3, 0x0
 
     invoke-virtual {v1, v2, v3}, Landroid/content/Intent;->putExtra(Ljava/lang/String;Z)Landroid/content/Intent;
 
@@ -5440,28 +5440,28 @@
 
     iget p1, p0, Lcom/android/internal/telephony/uicc/UiccController;->PROJECT_SIM_NUM:I
 
-    if-le p1, v3, :cond_0
+    const/4 p2, 0x1
 
-    if-eqz v0, :cond_0
+    if-le p1, p2, :cond_0
 
-    const/4 p1, 0x0
+    if-eqz v0, :cond_0
 
     :goto_0
-    iget p2, p0, Lcom/android/internal/telephony/uicc/UiccController;->PROJECT_SIM_NUM:I
+    iget p1, p0, Lcom/android/internal/telephony/uicc/UiccController;->PROJECT_SIM_NUM:I
 
-    if-ge p1, p2, :cond_0
+    if-ge v3, p1, :cond_0
 
-    iget-object p2, p0, Lcom/android/internal/telephony/uicc/UiccController;->mSimTraySwapType:[I
+    iget-object p1, p0, Lcom/android/internal/telephony/uicc/UiccController;->mSimTraySwapType:[I
 
-    const/4 v0, -0x1
+    const/4 p2, -0x1
 
-    aput v0, p2, p1
+    aput p2, p1, v3
 
-    iget-object p2, p0, Lcom/android/internal/telephony/uicc/UiccController;->mSimTraySwapState:[I
+    iget-object p1, p0, Lcom/android/internal/telephony/uicc/UiccController;->mSimTraySwapState:[I
 
-    aput v0, p2, p1
+    aput p2, p1, v3
 
-    add-int/lit8 p1, p1, 0x1
+    add-int/lit8 v3, v3, 0x1
 
     goto :goto_0
 
-- 
2.51.1

