From 76c7c40c4ad213d2ebe6f0eeb7aa656e8f9607b4 Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Sat, 1 Nov 2025 21:34:14 +0100
Subject: [PATCH] Enable MOBILEAP_5G_BASEDON_COUNTRY support

UN1CA: this patch is not complete! Please check unica/patches/product_feature/customize.sh for more info.
---
 .../server/wifi/ap/SemWifiApServiceImpl.smali | 23 ++++++++++++-------
 1 file changed, 15 insertions(+), 8 deletions(-)

diff --git a/smali/com/samsung/android/server/wifi/ap/SemWifiApServiceImpl.smali b/smali/com/samsung/android/server/wifi/ap/SemWifiApServiceImpl.smali
index b09ae6c..969bfee 100644
--- a/smali/com/samsung/android/server/wifi/ap/SemWifiApServiceImpl.smali
+++ b/smali/com/samsung/android/server/wifi/ap/SemWifiApServiceImpl.smali
@@ -12091,9 +12091,9 @@
 
     sget-boolean v0, Lcom/samsung/android/wifi/SemWifiManager;->MHSDBG:Z
 
-    const/4 v1, 0x1
+    const/4 v1, 0x0
 
-    const/4 v2, 0x0
+    const/4 v2, 0x1
 
     if-eqz v0, :cond_0
 
@@ -12101,11 +12101,11 @@
 
     const-string v3, "vendor.wifiap.5gbandcountry"
 
-    invoke-virtual {v0, v3, v2}, Lcom/samsung/android/server/wifi/SemFrameworkFacade;->getSystemProperties(Ljava/lang/String;I)I
+    invoke-virtual {v0, v3, v1}, Lcom/samsung/android/server/wifi/SemFrameworkFacade;->getSystemProperties(Ljava/lang/String;I)I
 
     move-result v0
 
-    if-ne v0, v1, :cond_0
+    if-ne v0, v2, :cond_0
 
     const-string p0, "SemWifiApServiceImpl"
 
@@ -12113,7 +12113,7 @@
 
     invoke-static {p0, v0}, Landroid/util/Log;->i(Ljava/lang/String;Ljava/lang/String;)I
 
-    return v1
+    return v2
 
     :cond_0
     iget-object v0, p0, Lcom/samsung/android/server/wifi/ap/SemWifiApServiceImpl;->mFacade:Lcom/samsung/android/server/wifi/SemFrameworkFacade;
@@ -12136,7 +12136,7 @@
 
     move-result-object v3
 
-    if-eqz v0, :cond_2
+    if-eqz v0, :cond_3
 
     const-string v4, "na"
 
@@ -12167,11 +12167,18 @@
 
     if-eqz p0, :cond_2
 
-    return v1
+    return v2
 
     :cond_2
+    return v1
+
+    :cond_3
     :goto_0
-    return v2
+    invoke-virtual {p0}, Lcom/samsung/android/server/wifi/ap/SemWifiApServiceImpl;->isRegionFor5GCountry()Z
+
+    move-result p0
+
+    return p0
 .end method
 
 .method public supportWifiAp6GBasedOnCountry()Z
-- 
2.51.1

