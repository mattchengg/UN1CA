From 337d315c33332bc654cc007dd6e519640ccb2f0b Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Sun, 31 Aug 2025 16:40:58 +0200
Subject: [PATCH] Disable TWT_CONTROL support

---
 .../driver/WifiDriverFeatureProvider.smali     | 18 ++----------------
 1 file changed, 2 insertions(+), 16 deletions(-)

diff --git a/smali/com/samsung/android/server/wifi/driver/WifiDriverFeatureProvider.smali b/smali/com/samsung/android/server/wifi/driver/WifiDriverFeatureProvider.smali
index 42f5e55..8cd05c9 100644
--- a/smali/com/samsung/android/server/wifi/driver/WifiDriverFeatureProvider.smali
+++ b/smali/com/samsung/android/server/wifi/driver/WifiDriverFeatureProvider.smali
@@ -145,11 +145,11 @@
 .end method
 
 .method private configDefaultFeatureSet()V
-    .locals 4
+    .locals 3
 
     iget-object v0, p0, Lcom/samsung/android/server/wifi/driver/WifiDriverFeatureProvider;->mSwFeatureInteger:Ljava/util/HashMap;
 
-    const/4 v1, 0x2
+    const/4 v1, 0x3
 
     invoke-static {v1}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
 
@@ -159,20 +159,6 @@
 
     invoke-static {v2}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
 
-    move-result-object v3
-
-    invoke-virtual {v0, v1, v3}, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
-
-    iget-object v0, p0, Lcom/samsung/android/server/wifi/driver/WifiDriverFeatureProvider;->mSwFeatureInteger:Ljava/util/HashMap;
-
-    const/4 v1, 0x3
-
-    invoke-static {v1}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
-
-    move-result-object v1
-
-    invoke-static {v2}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;
-
     move-result-object v2
 
     invoke-virtual {v0, v1, v2}, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
-- 
2.51.0

