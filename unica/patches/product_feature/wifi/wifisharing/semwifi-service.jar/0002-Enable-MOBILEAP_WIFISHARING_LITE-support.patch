From 459c9f5a352bb0c693d9567af54b3d87c1ec2df8 Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Sun, 31 Aug 2025 16:20:43 +0200
Subject: [PATCH] Enable MOBILEAP_WIFISHARING_LITE support

UN1CA: this patch is not complete! Please check unica/patches/product_feature/customize.sh for more info.
---
 .../server/wifi/ap/SemWifiApChipInfo.smali    | 33 ++++++++++++-------
 1 file changed, 22 insertions(+), 11 deletions(-)

diff --git a/smali/com/samsung/android/server/wifi/ap/SemWifiApChipInfo.smali b/smali/com/samsung/android/server/wifi/ap/SemWifiApChipInfo.smali
index fa418b4..39d39d4 100644
--- a/smali/com/samsung/android/server/wifi/ap/SemWifiApChipInfo.smali
+++ b/smali/com/samsung/android/server/wifi/ap/SemWifiApChipInfo.smali
@@ -1338,11 +1338,22 @@
 
     iput-boolean v5, p0, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportPowerSave:Z
 
+    sget-boolean v2, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportWifiSharing:Z
+
+    if-ne v2, v5, :cond_4
+
+    sput-boolean v5, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportWifiSharingLite:Z
+
+    const-string v2, "wifisharinlite true with feature"
+
+    invoke-direct {p0, v2}, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->addMHSDumpLog(Ljava/lang/String;)V
+
+    :cond_4
     invoke-direct {p0}, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->isKoreaModelForWifiSharingLite()Z
 
     move-result v2
 
-    if-nez v2, :cond_5
+    if-nez v2, :cond_6
 
     sget-object v2, Landroid/os/Build;->MODEL:Ljava/lang/String;
 
@@ -1352,7 +1363,7 @@
 
     move-result v2
 
-    if-nez v2, :cond_4
+    if-nez v2, :cond_5
 
     sget-object v2, Landroid/os/Build;->MODEL:Ljava/lang/String;
 
@@ -1362,9 +1373,9 @@
 
     move-result v2
 
-    if-eqz v2, :cond_5
+    if-eqz v2, :cond_6
 
-    :cond_4
+    :cond_5
     const-string v2, "Disable wifisharing"
 
     invoke-direct {p0, v2}, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->addMHSDumpLog(Ljava/lang/String;)V
@@ -1373,27 +1384,27 @@
 
     sput-boolean v4, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportWifiSharingLite:Z
 
-    :cond_5
+    :cond_6
     sget-boolean v2, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportWifiSharingLite:Z
 
     const-string v3, "vendor.wifi.dualconcurrent.interface"
 
-    if-nez v2, :cond_7
+    if-nez v2, :cond_8
 
     sget-boolean v2, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportWifiSharing:Z
 
-    if-eqz v2, :cond_6
+    if-eqz v2, :cond_7
 
     goto :goto_1
 
-    :cond_6
+    :cond_7
     const-string v2, "wlan0"
 
     invoke-static {v3, v2}, Landroid/os/SystemProperties;->set(Ljava/lang/String;Ljava/lang/String;)V
 
     goto :goto_2
 
-    :cond_7
+    :cond_8
     :goto_1
     const-string v2, "swlan0"
 
@@ -1420,7 +1431,7 @@
 
     const-string v2, " "
 
-    if-eqz v1, :cond_8
+    if-eqz v1, :cond_9
 
     new-instance v1, Ljava/lang/StringBuilder;
 
@@ -1450,7 +1461,7 @@
 
     invoke-direct {p0, v1}, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->addMHSDumpLog(Ljava/lang/String;)V
 
-    :cond_8
+    :cond_9
     new-instance p0, Ljava/lang/StringBuilder;
 
     const-string v1, " checkWifiSharing() "
-- 
2.51.0

