From e0bd22e824b3e7cb21793cabbd1324e0c738e94c Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Sun, 31 Aug 2025 16:17:54 +0200
Subject: [PATCH] Enable MOBILEAP_WIFISHARING_LITE support

UN1CA: this patch is not complete! Please check unica/patches/product_feature/customize.sh for more info.
---
 .../server/wifi/ap/SemWifiApChipInfo.smali    | 33 ++++++++++++-------
 1 file changed, 22 insertions(+), 11 deletions(-)

diff --git a/smali/com/samsung/android/server/wifi/ap/SemWifiApChipInfo.smali b/smali/com/samsung/android/server/wifi/ap/SemWifiApChipInfo.smali
index 477817c..0943e23 100644
--- a/smali/com/samsung/android/server/wifi/ap/SemWifiApChipInfo.smali
+++ b/smali/com/samsung/android/server/wifi/ap/SemWifiApChipInfo.smali
@@ -1347,11 +1347,22 @@
     iput-boolean v5, p0, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportPowerSave:Z
 
     :cond_4
+    sget-boolean v2, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportWifiSharing:Z
+
+    if-ne v2, v5, :cond_5
+
+    sput-boolean v5, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportWifiSharingLite:Z
+
+    const-string v2, "wifisharinlite true with feature"
+
+    invoke-direct {p0, v2}, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->addMHSDumpLog(Ljava/lang/String;)V
+
+    :cond_5
     invoke-direct {p0}, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->isKoreaModelForWifiSharingLite()Z
 
     move-result v2
 
-    if-nez v2, :cond_6
+    if-nez v2, :cond_7
 
     sget-object v2, Landroid/os/Build;->MODEL:Ljava/lang/String;
 
@@ -1361,7 +1372,7 @@
 
     move-result v2
 
-    if-nez v2, :cond_5
+    if-nez v2, :cond_6
 
     sget-object v2, Landroid/os/Build;->MODEL:Ljava/lang/String;
 
@@ -1371,9 +1382,9 @@
 
     move-result v2
 
-    if-eqz v2, :cond_6
+    if-eqz v2, :cond_7
 
-    :cond_5
+    :cond_6
     const-string v2, "Disable wifisharing"
 
     invoke-direct {p0, v2}, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->addMHSDumpLog(Ljava/lang/String;)V
@@ -1382,27 +1393,27 @@
 
     sput-boolean v4, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportWifiSharingLite:Z
 
-    :cond_6
+    :cond_7
     sget-boolean v2, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportWifiSharingLite:Z
 
     const-string v3, "vendor.wifi.dualconcurrent.interface"
 
-    if-nez v2, :cond_8
+    if-nez v2, :cond_9
 
     sget-boolean v2, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->mSupportWifiSharing:Z
 
-    if-eqz v2, :cond_7
+    if-eqz v2, :cond_8
 
     goto :goto_1
 
-    :cond_7
+    :cond_8
     const-string v2, "wlan0"
 
     invoke-static {v3, v2}, Landroid/os/SystemProperties;->set(Ljava/lang/String;Ljava/lang/String;)V
 
     goto :goto_2
 
-    :cond_8
+    :cond_9
     :goto_1
     const-string v2, "swlan0"
 
@@ -1429,7 +1440,7 @@
 
     const-string v2, " "
 
-    if-eqz v1, :cond_9
+    if-eqz v1, :cond_a
 
     new-instance v1, Ljava/lang/StringBuilder;
 
@@ -1459,7 +1470,7 @@
 
     invoke-direct {p0, v1}, Lcom/samsung/android/server/wifi/ap/SemWifiApChipInfo;->addMHSDumpLog(Ljava/lang/String;)V
 
-    :cond_9
+    :cond_a
     new-instance p0, Ljava/lang/StringBuilder;
 
     const-string v1, " checkWifiSharing() "
-- 
2.51.0

