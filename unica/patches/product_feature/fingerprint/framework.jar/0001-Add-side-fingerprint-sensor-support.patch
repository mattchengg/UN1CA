From d650ecd11fdd97d82f6ed9efda09268bf94015e6 Mon Sep 17 00:00:00 2001
From: Salvo Giangreco <giangrecosalvo9@gmail.com>
Date: Sat, 30 Aug 2025 16:15:16 +0200
Subject: [PATCH] Add side fingerprint sensor support

---
 .../hardware/fingerprint/FingerprintManager.smali  |  2 +-
 .../fingerprint/HidlFingerprintSensorConfig.smali  | 14 +++++---------
 .../SemFingerprintManager$Characteristics.smali    |  2 +-
 .../com/samsung/android/rune/InputRune.smali       |  4 ++--
 4 files changed, 9 insertions(+), 13 deletions(-)

diff --git a/smali_classes2/android/hardware/fingerprint/FingerprintManager.smali b/smali_classes2/android/hardware/fingerprint/FingerprintManager.smali
index 1ee678cf..764542ec 100644
--- a/smali_classes2/android/hardware/fingerprint/FingerprintManager.smali
+++ b/smali_classes2/android/hardware/fingerprint/FingerprintManager.smali
@@ -1193,7 +1193,7 @@
 .method public static blacklist semGetSensorPosition()I
     .locals 1
 
-    const/4 v0, 0x2
+    const/4 v0, 0x4
 
     return v0
 .end method
diff --git a/smali_classes2/android/hardware/fingerprint/HidlFingerprintSensorConfig.smali b/smali_classes2/android/hardware/fingerprint/HidlFingerprintSensorConfig.smali
index 6a53a376..8c3835ca 100644
--- a/smali_classes2/android/hardware/fingerprint/HidlFingerprintSensorConfig.smali
+++ b/smali_classes2/android/hardware/fingerprint/HidlFingerprintSensorConfig.smali
@@ -140,13 +140,13 @@
 
     move-result v1
 
-    if-eqz v1, :cond_4
+    if-eqz v1, :cond_3
 
-    if-eq v1, v0, :cond_3
+    if-eq v1, v0, :cond_2
 
     const/4 v2, 0x2
 
-    if-eq v1, v2, :cond_2
+    if-eq v1, v2, :cond_4
 
     const/4 v2, 0x3
 
@@ -169,20 +169,16 @@
     goto :goto_0
 
     :cond_2
-    iput-byte v2, p0, Landroid/hardware/fingerprint/HidlFingerprintSensorConfig;->sensorType:B
-
-    goto :goto_0
-
-    :cond_3
     const/4 v0, 0x5
 
     iput-byte v0, p0, Landroid/hardware/fingerprint/HidlFingerprintSensorConfig;->sensorType:B
 
     goto :goto_0
 
-    :cond_4
+    :cond_3
     iput-byte p1, p0, Landroid/hardware/fingerprint/HidlFingerprintSensorConfig;->sensorType:B
 
+    :cond_4
     :goto_0
     invoke-direct {p0, p1, p1, p1}, Landroid/hardware/fingerprint/HidlFingerprintSensorConfig;->setSensorLocation(III)V
 
diff --git a/smali_classes6/com/samsung/android/bio/fingerprint/SemFingerprintManager$Characteristics.smali b/smali_classes6/com/samsung/android/bio/fingerprint/SemFingerprintManager$Characteristics.smali
index 43149059..9824b830 100644
--- a/smali_classes6/com/samsung/android/bio/fingerprint/SemFingerprintManager$Characteristics.smali
+++ b/smali_classes6/com/samsung/android/bio/fingerprint/SemFingerprintManager$Characteristics.smali
@@ -94,7 +94,7 @@
 .method public whitelist getSensorType()I
     .locals 0
 
-    const/4 p0, 0x3
+    const/4 p0, 0x1
 
     return p0
 .end method
diff --git a/smali_classes6/com/samsung/android/rune/InputRune.smali b/smali_classes6/com/samsung/android/rune/InputRune.smali
index c080ce4b..7fece207 100644
--- a/smali_classes6/com/samsung/android/rune/InputRune.smali
+++ b/smali_classes6/com/samsung/android/rune/InputRune.smali
@@ -649,7 +649,7 @@
 
     sput-boolean v1, Lcom/samsung/android/rune/InputRune;->PWM_SKT_PHONE_RELAX_MODE:Z
 
-    sput-boolean v0, Lcom/samsung/android/rune/InputRune;->PWM_FINGERPRINT_SIDE_TOUCH:Z
+    sput-boolean v4, Lcom/samsung/android/rune/InputRune;->PWM_FINGERPRINT_SIDE_TOUCH:Z
 
     invoke-static {}, Lcom/samsung/android/feature/SemFloatingFeature;->getInstance()Lcom/samsung/android/feature/SemFloatingFeature;
 
@@ -773,7 +773,7 @@
 
     sput-boolean v1, Lcom/samsung/android/rune/InputRune;->PWM_QUICK_LAUNCH_CAMERA:Z
 
-    sput-boolean v0, Lcom/samsung/android/rune/InputRune;->PWM_SKIP_TOO_FAST_DOUBLE_PRESS:Z
+    sput-boolean v4, Lcom/samsung/android/rune/InputRune;->PWM_SKIP_TOO_FAST_DOUBLE_PRESS:Z
 
     sput-boolean v0, Lcom/samsung/android/rune/InputRune;->KNOX_CAPTURE_XCOVER_OR_TOP_KEY:Z
 
-- 
2.51.0

